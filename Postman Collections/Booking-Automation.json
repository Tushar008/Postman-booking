{
	"info": {
		"_postman_id": "81b92b2f-19be-4e9c-81e0-265cb9d8db0a",
		"name": "Booking",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "GET",
			"item": [
				{
					"name": "Positive-Test",
					"item": [
						{
							"name": "Get Booking Id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "1bc21652-7aca-4d79-aa84-f8a0a6aff191",
										"exec": [
											"const schema = {\r",
											"  type: \"array\",\r",
											"  items: {\r",
											"    type: \"object\",\r",
											"    required: [\"bookingid\"],\r",
											"    properties: {\r",
											"      bookingid: { type: \"integer\" }\r",
											"    }\r",
											"  }\r",
											"};\r",
											"\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time should be below minimum benchmark\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(2000);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array type\", function () {\r",
											"    pm.expect(pm.response.json()).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Each object contains numeric bookingid\", function () {\r",
											"    pm.response.json().forEach(item => {\r",
											"        pm.expect(item).to.have.property('bookingid');\r",
											"        pm.expect(item.bookingid).to.be.a('number');\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Schema verification\", function () {\r",
											"  pm.expect(tv4.validate(pm.response.json(), schema)).to.be.true;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "4d582779-6f1f-485f-b1a0-b88aaa2111d1",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": "https://restful-booker.herokuapp.com/booking"
							},
							"response": []
						}
					],
					"id": "066773ff-1a4a-4842-9e22-eff3da1922ed"
				},
				{
					"name": "Negetive-Test",
					"item": [
						{
							"name": "Get Booking Id invalid url",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "1bc21652-7aca-4d79-aa84-f8a0a6aff191",
										"exec": [
											"pm.test(\"Status code is 404\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time should be below minimum benchmark\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(2000);\r",
											"});\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "3dad9c75-f2c4-4d5e-92a0-24754c2a75c7",
										"exec": [
											"pm.request.url = 'https://restful-booker.herokuapp.com/boo';"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "7a16208e-cd01-4df6-9b81-b49df180e698",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": "https://restful-booker.herokuapp.com/booking"
							},
							"response": []
						}
					],
					"id": "9a6c698f-e559-440c-bf07-3ef1a9497530"
				}
			],
			"id": "d7fd2d31-e848-43e9-8b24-96250c5ae9c7"
		},
		{
			"name": "POST",
			"item": [
				{
					"name": "Positive-Tests",
					"item": [
						{
							"name": "Create Booking Id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "55f5a1d8-1f62-4eb3-bb62-563d3ef0983b",
										"exec": [
											"pm.collectionVariables.set(\"bookingId\", pm.response.json().bookingid);\r",
											"\r",
											"pm.test(\"verify status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time should be below minimum benchmark\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(2000);\r",
											"});\r",
											"\r",
											"const schema = {\r",
											"  type: \"object\",\r",
											"  required: [\"bookingid\", \"booking\"],\r",
											"  properties: {\r",
											"    bookingid: { type: \"integer\" },\r",
											"    booking: {\r",
											"      type: \"object\",\r",
											"      required: [\"firstname\", \"lastname\", \"totalprice\", \"depositpaid\", \"bookingdates\"],\r",
											"      properties: {\r",
											"        firstname: { type: \"string\" },\r",
											"        lastname: { type: \"string\" },\r",
											"        totalprice: { type: \"number\" },\r",
											"        depositpaid: { type: \"boolean\" },\r",
											"        bookingdates: {\r",
											"          type: \"object\",\r",
											"          required: [\"checkin\", \"checkout\"],\r",
											"          properties: {\r",
											"            checkin: { type: \"string\" },\r",
											"            checkout: { type: \"string\" }\r",
											"          }\r",
											"        }\r",
											"      }\r",
											"    }\r",
											"  }\r",
											"};\r",
											"\r",
											"pm.test(\"verify response contains bookingid\", function () {\r",
											"    pm.expect(pm.response.json()).to.have.property(\"bookingid\");\r",
											"});\r",
											"\r",
											"pm.test(\"verify booking structure\", function () {\r",
											"    const booking = pm.response.json().booking;\r",
											"    pm.expect(booking.firstname).to.be.a(\"string\");\r",
											"    pm.expect(booking.lastname).to.be.a(\"string\");\r",
											"    pm.expect(booking.totalprice).to.be.a(\"number\");\r",
											"    pm.expect(booking.depositpaid).to.be.a(\"boolean\");\r",
											"    pm.expect(booking.bookingdates.checkin).to.match(/^\\d{4}-\\d{2}-\\d{2}$/);\r",
											"    pm.expect(booking.bookingdates.checkout).to.match(/^\\d{4}-\\d{2}-\\d{2}$/);\r",
											"});\r",
											"\r",
											"pm.test(\"Schema valid for POST response\", function () {\r",
											"  pm.expect(tv4.validate(pm.response.json(), schema)).to.be.true;\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"packages": {},
										"type": "text/javascript"
									}
								}
							],
							"id": "d417e479-b58a-4ff3-8fa9-a2a6381d6fb9",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "    {\r\n    \"firstname\" : \"name\",\r\n    \"lastname\" : \"lastname\",\r\n    \"totalprice\" : 111,\r\n    \"depositpaid\" : true,\r\n    \"bookingdates\" : {\r\n    \"checkin\" : \"2018-01-01\",\r\n    \"checkout\" : \"2019-01-01\"\r\n    },\r\n    \"additionalneeds\" : \"Breakfast\"\r\n    }\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://restful-booker.herokuapp.com/booking"
							},
							"response": []
						},
						{
							"name": "Get Booking Id",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "1bc21652-7aca-4d79-aa84-f8a0a6aff191",
										"exec": [
											"const schema = {\r",
											"    type: \"array\",\r",
											"    items: {\r",
											"        type: \"object\",\r",
											"        required: [\"bookingid\"],\r",
											"        properties: {\r",
											"            bookingid: { type: \"integer\" }\r",
											"        }\r",
											"    }\r",
											"};\r",
											"\r",
											"pm.test(\"Status code is 200\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"pm.test(\"Response time should be below minimum benchmark\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(2000);\r",
											"});\r",
											"\r",
											"pm.test(\"Response is an array type\", function () {\r",
											"    pm.expect(pm.response.json()).to.be.an('array');\r",
											"});\r",
											"\r",
											"pm.test(\"Each object contains numeric bookingid\", function () {\r",
											"    pm.response.json().forEach(item => {\r",
											"        pm.expect(item).to.have.property('bookingid');\r",
											"        pm.expect(item.bookingid).to.be.a('number');\r",
											"    });\r",
											"});\r",
											"\r",
											"pm.test(\"Schema verification\", function () {\r",
											"    pm.expect(tv4.validate(pm.response.json(), schema)).to.be.true;\r",
											"});\r",
											"\r",
											"\r",
											"const bookingId = pm.collectionVariables.get(\"bookingId\");\r",
											"console.log(\"Checking for bookingId:\", bookingId);\r",
											"\r",
											"\r",
											"let bookingsArray;\r",
											"try {\r",
											"    bookingsArray = pm.response.json();\r",
											"} catch (e) {\r",
											"    console.error(\"âŒ Failed to parse response JSON:\", e);\r",
											"    pm.test(\"Response should be valid JSON\", function () {\r",
											"        pm.expect.fail(\"Invalid JSON response\");\r",
											"    });\r",
											"}\r",
											"\r",
											"const exists = bookingsArray.some(item => item.bookingid == bookingId);"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "77e43a2c-6d48-4117-8d59-b9053c38c0b0",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "2ebbe075-f054-4133-8102-510c9f923ce8",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "GET",
								"header": [],
								"url": "https://restful-booker.herokuapp.com/booking"
							},
							"response": []
						}
					],
					"id": "a29fb1ec-b3e1-4707-a8d3-6b5093d40add"
				},
				{
					"name": "Negetive-Tests",
					"item": [
						{
							"name": "Create Booking -invalid tests",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "55f5a1d8-1f62-4eb3-bb62-563d3ef0983b",
										"exec": [
											"\r",
											"//due to nature of the API, for some negetive cases as well it is shwoing 200 Ok status. To make test pass I have updated those status to 200 in below expected status codes\r",
											"const expectedStatusCodes = [500, 200, 200, 500, 200, 404, 200];\r",
											"\r",
											"const currentIndex = pm.info.iteration;\r",
											"\r",
											"// Get current scenario (set from Pre-request Script)\r",
											"const scenario = pm.variables.get(\"scenario\");\r",
											"\r",
											"const expectedStatus = expectedStatusCodes[currentIndex];\r",
											"\r",
											"console.log(`Scenario: ${scenario}`);\r",
											"console.log(`Expected Status: ${expectedStatus}, Actual: ${pm.response.code}`);\r",
											"\r",
											"pm.test(`Scenario \"${scenario}\" should return ${expectedStatus}`, function () {\r",
											"    pm.expect(pm.response.code).to.eql(expectedStatus);\r",
											"});\r",
											"\r",
											"console.log(\"Response Body:\", pm.response.text());\r",
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "3ddd5e06-d27f-41c8-9da0-d433faa39664",
										"exec": [
											"\r",
											"const payload = [\r",
											"    {\r",
											"        \"scenario\": \"verify Missing Required Field\",\r",
											"        \"lastname\": \"Doe\",\r",
											"        \"totalprice\": 150,\r",
											"        \"depositpaid\": true,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": \"2022-01-01\",\r",
											"            \"checkout\": \"2022-01-10\"\r",
											"        },\r",
											"        \"additionalneeds\": \"Lunch\"\r",
											"    },\r",
											"    {\r",
											"        \"scenario\": \"verify Special Characters\",\r",
											"        \"firstname\": \"#$$\",\r",
											"        \"lastname\": \"Doe*&\",\r",
											"        \"totalprice\": 150,\r",
											"        \"depositpaid\": true,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": \"2022-01-01\",\r",
											"            \"checkout\": \"2022-01-10\"\r",
											"        },\r",
											"        \"additionalneeds\": \"Lunch\"\r",
											"    },\r",
											"    {\r",
											"        \"scenario\": \"verify Too Long Input\",\r",
											"        \"firstname\": \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\",\r",
											"        \"lastname\": \"BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB\",\r",
											"        \"totalprice\": 150,\r",
											"        \"depositpaid\": true,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": \"2022-01-01\",\r",
											"            \"checkout\": \"2022-01-10\"\r",
											"        },\r",
											"        \"additionalneeds\": \"Lunch\"\r",
											"    },\r",
											"    {\r",
											"        \"scenario\": \"verify Null Values for payload\",\r",
											"        \"firstname\": null,\r",
											"        \"lastname\": null,\r",
											"        \"totalprice\": null,\r",
											"        \"depositpaid\": null,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": null,\r",
											"            \"checkout\": null\r",
											"        },\r",
											"        \"additionalneeds\": null\r",
											"    },\r",
											"    {\r",
											"        \"scenario\": \"verify Special Characters\",\r",
											"        \"firstname\": \"test\",\r",
											"        \"lastname\": \"Doe*&\",\r",
											"        \"totalprice\": 150,\r",
											"        \"depositpaid\": true,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": \"2022-01-01\",\r",
											"            \"checkout\": \"2022-01-10\"\r",
											"        },\r",
											"        \"additionalneeds\": \"Lunch\",\r",
											"    },\r",
											"      {\r",
											"        \"scenario\": \"verify Invalid url\",\r",
											"        \"firstname\": \"test\",\r",
											"        \"lastname\": \"Doe*&\",\r",
											"        \"totalprice\": 150,\r",
											"        \"depositpaid\": true,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": \"2022-01-01\",\r",
											"            \"checkout\": \"2022-01-10\"\r",
											"        },\r",
											"        \"additionalneeds\": \"Lunch\",\r",
											"        \"overrideUrl\": \"https://restful-booker.herokuapp.com/bo\"\r",
											"    },\r",
											"      {\r",
											"        \"scenario\": \"verify Duplicate booking\",\r",
											"        \"firstname\": \"test\",\r",
											"        \"lastname\": \"Doe*&\",\r",
											"        \"totalprice\": 150,\r",
											"        \"depositpaid\": true,\r",
											"        \"bookingdates\": {\r",
											"            \"checkin\": \"2022-01-01\",\r",
											"            \"checkout\": \"2022-01-10\"\r",
											"        },\r",
											"        \"additionalneeds\": \"Lunch\",\r",
											"    }\r",
											"];\r",
											"\r",
											"let current = payload[pm.info.iteration];\r",
											"\r",
											"\r",
											"pm.variables.set(\"requestBody\", JSON.stringify(current));\r",
											"pm.variables.set(\"scenario\", current.scenario);\r",
											"pm.variables.set(\"overrideUrl\", current.overrideUrl || \"\");\r",
											"\r",
											"if (current.overrideUrl) {\r",
											"    pm.request.url = current.overrideUrl;\r",
											"    console.log(`Using invalid URL for scenario: ${current.scenario}`);\r",
											"} else {\r",
											"    console.log(`Using normal URL for scenario: ${current.scenario}`);\r",
											"}"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "520da77c-86c3-40ec-b482-35c30c39e75b",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{{requestBody}}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://restful-booker.herokuapp.com/booking"
							},
							"response": []
						},
						{
							"name": "Create Booking- verify missing required fields",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "55f5a1d8-1f62-4eb3-bb62-563d3ef0983b",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "3ddd5e06-d27f-41c8-9da0-d433faa39664",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"id": "e9840486-0043-463c-b6a4-fc86b360ad78",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "    {\r\n        //firstname is missing\r\n        \"lastname\": \"Doe\",\r\n        \"totalprice\": 150,\r\n        \"depositpaid\": true,\r\n        \"bookingdates\": {\r\n            \"checkin\": \"2022-01-01\",\r\n            \"checkout\": \"2022-01-10\"\r\n        },\r\n        \"additionalneeds\": \"Lunch\"\r\n    }",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": "https://restful-booker.herokuapp.com/booking"
							},
							"response": []
						}
					],
					"id": "0648a6eb-8a16-46ff-952f-30efc69649af"
				}
			],
			"id": "105694be-c1ab-4ad8-ac3a-c32054dae381"
		}
	],
	"variable": [
		{
			"key": "bookingId",
			"value": ""
		}
	]
}